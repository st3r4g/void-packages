# Template file for 'intel-compute-runtime'
pkgname=intel-compute-runtime
version=20.21.16886
revision=1
archs="x86_64*"
wrksrc=compute-runtime-${version}
build_style=cmake
hostmakedepends="pkg-config"
makedepends="intel-gmmlib-devel intel-graphics-compiler-devel"
depends="intel-graphics-compiler"
short_desc="Intel Graphics Compute Runtime for OpenCL (Broadwell+)"
maintainer="Stefano Ragni <st3r4g@protonmail.com>"
license="MIT"
homepage="https://github.com/intel/compute-runtime"
distfiles="https://github.com/intel/compute-runtime/archive/${version}.tar.gz"
checksum=7be4f46fb7e78e16ff37ba45035a20f4e8e492eece0d3d754bad173c4857a2a0

if [ -z "${XBPS_CHECK_PKGS}" ]; then
	configure_args+=" -DSKIP_UNIT_TESTS=1"
fi

if [ "$XBPS_TARGET_LIBC" = "musl" ]; then
	makedepends+=" libexecinfo-devel"
	CXXFLAGS+=" -lexecinfo -DSANITIZER_BUILD"
fi

post_install() {
	vlicense LICENSE
}
